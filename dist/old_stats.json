{"id":"old_stats","script":"//* TITLE Old Stats **//\r\n//* VERSION 0.2.1 **//\r\n//* DESCRIPTION  **//\r\n//* DEVELOPER STUDIOXENIX **//\r\n//* FRAME false **//\r\n//* BETA false **//\r\n\r\nXKit.extensions.old_stats = new Object({\r\n\r\n\trunning: false,\r\n\t\r\n\t/*\r\n\told_stats_draw: function() {\r\n        var canvas = document.getElementById('xkit-activity-canvas');\r\n        if (canvas.getContext){\r\n            var ctx = canvas.getContext('2d');\r\n            \r\n            \r\n            var activity_sparkline = XKit.interface.user().activity.slice(1,-1).split(\",\");\r\n            // Convert each string to int in array\r\n            for (var i=0; i<activity_sparkline.length; i++) {\r\n                activity_sparkline[i] = parseInt(activity_sparkline[i], 10);\r\n            }\r\n        \r\n            var activity_max = getMaxOfArray(activity_sparkline);\r\n            var activity_min = getMinOfArray(activity_sparkline);\r\n            \r\n            var path=new Path2D();\r\n            \r\n            path.moveTo(0, Math.round(15 - (activity_sparkline[0]-activity_min)/(activity_max-activity_min)*15));\r\n            \r\n            for (var n=1; n<activity_sparkline.length; n++) {\r\n                activity_sparkline[n] = Math.round(15 - (activity_sparkline[n]-activity_min)/(activity_max-activity_min)*15);\r\n                path.lineTo(n*3, activity_sparkline[n]);\r\n                path.moveTo(n*3, activity_sparkline[n]);\r\n            }\r\n\r\n            var path=new Path2D();\r\n            path.moveTo(0,7);\r\n            path.lineTo(36,15);\r\n            path.lineTo(3,0);\r\n            //ctx.fill(path);\r\n\r\n            ctx.stroke(path);\r\n        }\r\n\t}, */\r\n\r\n\trun: function() {\r\n\t\tthis.running = true;\r\n\r\n\t\t//XKit.tools.init_css(\"old_stats\");\r\n\r\n\t\tvar m_user = XKit.interface.user();\r\n\r\n\t\tvar posts_show = \" \";\r\n\t\tvar followers_show = \" \";\r\n\t\tvar drafts_show\t= \" \";\r\n\t\tvar queue_show = \" \";\r\n\r\n\t\tif (XKit.interface.where().inbox === true) { return; }\r\n\r\n\t\tif (m_user.posts === 0) {\r\n\t\t\tposts_show = \" count_0 \";\r\n\t\t}\r\n\t\tif (m_user.followers === 0) {\r\n\t\t\tfollowers_show = \" count_0 \";\r\n\t\t}\r\n\t\tif (m_user.drafts === 0) {\r\n\t\t\tdrafts_show = \" count_0 \";\r\n\t\t}\r\n\t\tif (m_user.processing === 0) {\r\n\t\t\tprocessing_show = \" count_0 \";\r\n\t\t}\r\n\t\tif (m_user.queue === 0) {\r\n\t\t\tqueue_show = \" count_0 \";\r\n\t\t}\r\n\t\t\r\n\t\t/*var m_account = $(\"#account_button\");\r\n\t\tm_account.click();\r\n\t\tvar activity_graph = document.getElementsByClassName(\"popover--account-popover\")[0];\r\n\t\twindow.setTimeout(function() {\r\n\t\t\tm_account.click();\r\n\t\t}, 1000); */\r\n\r\n\r\n\t\tvar xf_html = \t'<ul data-blog-name=\"' + m_user.name + '\" id=\"dashboard_controls_open_blog\" class=\"controls_section\">' +\r\n\t\t\t\t\t'<li class=\"no_push selected_blog\">' +\r\n\t\t\t\t\t\t'<div class=\"open_blog with_subtitle\">' +\r\n\t\t\t\t\t\t\t'<a class=\"currently_selected_blog hide_overflow blog_title\">' + m_user.name + '</a>' +\r\n\t\t\t\t\t\t\t'<small>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"hide_overflow\">' +\r\n\t\t\t\t\t\t\t\t\t'<a target=\"_blank\" href=\"http://' + m_user.name + '.tumblr.com/\" class=\"open_blog_link\" id=\"open_blog_link\">' + m_user.title + '</a>' +\r\n\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t'</small>' +\r\n\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'<li class=\"controls_section_item' + posts_show + '\" data-blog-controls-count=\"post_count\" id=\"posts_control\">' +\r\n\t\t\t\t\t\t'<a class=\"control-item control-anchor posts\" href=\"/blog/' + m_user.name + '\">' +\r\n\t\t\t\t\t\t\t'<div class=\"hide_overflow\">Posts</div>' +\r\n\t\t\t\t\t\t\t'<span class=\"count\">' + m_user.posts.toLocaleString() + '</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'<li class=\"controls_section_item' + followers_show + '\" data-blog-controls-count=\"follower_count\">' +\r\n\t\t\t\t\t\t'<a class=\"control-item control-anchor followers\" href=\"/blog/' + m_user.name + '/followers\">' +\r\n\t\t\t\t\t\t\t'<div class=\"hide_overflow\">Followers</div>' +\r\n\t\t\t\t\t\t\t'<span class=\"count\">' + m_user.followers.toLocaleString() + '</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'<li class=\"controls_section_item popover_menu_item_blog_details\">' +\r\n\t\t\t\t\t\t'<a class=\"control-item control-anchor activity\" href=\"/blog/' + m_user.name + '/activity\">' +\r\n\t\t\t\t\t\t\t'<div class=\"hide_overflow\" id=\"old_stats_activity\">Activity</div>' + \r\n\t\t\t\t\t\t\t'<span data-sparkline=\"' + m_user.activity + '\" class=\"count sparkline\">' +\r\n\t\t\t\t\t\t\t\t'<canvas style=\"display: inline-block; vertical-align: top; height: 15px; width: 36px;\" width=\"72\" height=\"30\"></canvas>' +\r\n\t\t\t\t\t\t\t'</span>' + \r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'<li class=\"controls_section_item' + drafts_show + '\" data-blog-controls-count=\"draft_count\">' +\r\n\t\t\t\t\t\t'<a class=\"control-item control-anchor drafts\" href=\"/blog/' + m_user.name + '/drafts\">' +\r\n\t\t\t\t\t\t\t'<div class=\"hide_overflow\">Drafts</div>' +\r\n\t\t\t\t\t\t\t'<span class=\"count\">' + m_user.drafts.toLocaleString() + '</span>' +\r\n\t\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'<li class=\"controls_section_item' + processing_show + '\" data-blog-controls-count=\"transcoding_count\">' +\r\n\t\t\t\t\t\t'<a class=\"control-item control-anchor queue\" href=\"/blog/' + m_user.name + '/processing\">' +\r\n\t\t\t\t\t\t\t'<div class=\"hide_overflow\">Processing</div>' +\r\n\t\t\t\t\t\t\t'<span class=\"count\">' + m_user.processing.toLocaleString() + '</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'<li class=\"controls_section_item' + queue_show + '\" data-blog-controls-count=\"queued_post_count\">' +\r\n\t\t\t\t\t\t'<a class=\"control-item control-anchor queue\" href=\"/blog/' + m_user.name + '/queue\">' +\r\n\t\t\t\t\t\t\t'<div class=\"hide_overflow\">Queue</div>' +\r\n\t\t\t\t\t\t\t'<span class=\"count\">' + m_user.queue.toLocaleString() + '</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'<li class=\"controls_section_item no_push\">' +\r\n\t\t\t\t\t\t'<a class=\"control-item control-anchor customize\" href=\"/settings/blog/' + m_user.name + '\">' +\r\n\t\t\t\t\t\t\t'<div class=\"hide_overflow\">' +\r\n\t\t\t\t\t\t\t\t'Edit appearance<i class=\"sub_control link_arrow icon_right icon_arrow_carrot_right\"></i>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</li>' +\r\n\t\t\t\t'</ul>' +\r\n\t\t\t\t'<ul id=\"xkit-dashboard-account\" class=\"controls_section\"></ul>';\r\n\r\n\t\t$(\".recommended_tumblelogs\").before(xf_html);\r\n\t\t\r\n\t//\t$(\"#old_stats_activity\").after(activity_graph.childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[1]);\r\n\t\t\r\n\t\t/*\r\n\t\tvar canvas = $('#xkit-activity-canvas');\r\n        if (canvas.getContext){\r\n            var ctx = canvas.getContext('2d');\r\n            \r\n            \r\n            var activity_sparkline = XKit.interface.user().activity.slice(1,-1).split(\",\");\r\n            // Convert each string to int in array\r\n            for (var i=0; i<activity_sparkline.length; i++) {\r\n                activity_sparkline[i] = parseInt(activity_sparkline[i], 10);\r\n            }\r\n        \r\n            var activity_max = getMaxOfArray(activity_sparkline);\r\n            var activity_min = getMinOfArray(activity_sparkline);\r\n            \r\n            var path=new Path2D();\r\n            \r\n            path.moveTo(0, Math.round(15 - (activity_sparkline[0]-activity_min)/(activity_max-activity_min)*15));\r\n            \r\n            for (var n=1; n<activity_sparkline.length; n++) {\r\n                activity_sparkline[n] = Math.round(15 - (activity_sparkline[n]-activity_min)/(activity_max-activity_min)*15);\r\n                path.lineTo(n*3, activity_sparkline[n]);\r\n                path.moveTo(n*3, activity_sparkline[n]);\r\n            }\r\n\r\n            var path=new Path2D();\r\n            path.moveTo(0,7);\r\n            path.lineTo(36,15);\r\n            path.lineTo(3,0);\r\n            ctx.fill(path);\r\n\r\n            //ctx.stroke(path);\r\n        }*/\r\n\r\n\t},\r\n\r\n\r\n\tdestroy: function() {\r\n\t\tthis.running = false;\r\n\t}\r\n\r\n});\r\n","title":"Old Stats","description":"*","developer":"STUDIOXENIX","version":"0.2.1","frame":"false","beta":"false","file":"found","server":"up","errors":false,"slow":"false"}